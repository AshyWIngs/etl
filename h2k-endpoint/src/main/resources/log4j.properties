log4j.rootLogger=INFO,stdout,rolling
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.encoding=UTF-8
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d{ISO8601} %-5p [%t] %c - %m%n

# === Уровни логирования (шум гасим, наши сообщения — по делу) ===
# Наш пакет по умолчанию — INFO. Всё детальное уводим в DEBUG точечно по классам ниже.
log4j.logger.kz.qazmarka.h2k=INFO

# Тише сторонние библиотеки (можно поднять до INFO при расследованиях)
log4j.logger.org.apache.kafka=WARN
log4j.logger.org.apache.zookeeper=WARN
log4j.logger.org.apache.hadoop=WARN
log4j.logger.org.apache.hadoop.hbase=WARN
# Но оставим информацию о репликации HBase видимой
log4j.logger.org.apache.hadoop.hbase.replication=INFO

# Точечные переключатели DEBUG для наших классов (раскомментируйте по необходимости)
# log4j.logger.kz.qazmarka.h2k.endpoint.KafkaReplicationEndpoint=DEBUG
# log4j.logger.kz.qazmarka.h2k.kafka.BatchSender=DEBUG
# log4j.logger.kz.qazmarka.h2k.kafka.TopicEnsurer=DEBUG
# log4j.logger.kz.qazmarka.h2k.schema.ValueCodecPhoenix=DEBUG

# === (Опционально) Асинхронная консоль для снижения влияния логов на горячий путь ===
# Включайте только если stdout не является критическим каналом синхронной диагностики
#log4j.appender.async=org.apache.log4j.AsyncAppender
#log4j.appender.async.BufferSize=1024
#log4j.appender.async.AppenderRef=stdout
#log4j.rootLogger=INFO,async

# === Ротация файлов логов (RollingFileAppender) ===
# Путь по умолчанию; можно переопределить через JVM-флаги/ENV:
#   -Dh2k.log.dir=/var/log/h2k
#   -Dh2k.log.profile=fast     # варианты: default | fast | reliable (или свой)
# Итоговый путь будет: ${h2k.log.dir}/h2k-endpoint-${h2k.log.profile}.log
h2k.log.dir=logs
h2k.log.profile=default
h2k.log.file=${h2k.log.dir}/h2k-endpoint-${h2k.log.profile}.log

# Параметры ротации настраиваемы через JVM-флаги/ENV
#   -Dh2k.log.maxFileSize=128MB
#   -Dh2k.log.maxBackupIndex=20
h2k.log.maxFileSize=64MB
h2k.log.maxBackupIndex=10

log4j.appender.rolling=org.apache.log4j.RollingFileAppender
log4j.appender.rolling.File=${h2k.log.file}
log4j.appender.rolling.Append=true
log4j.appender.rolling.encoding=UTF-8
# Размер одного файла лога и количество бэкапов (храним N файлов)
log4j.appender.rolling.MaxFileSize=${h2k.log.maxFileSize}
log4j.appender.rolling.MaxBackupIndex=${h2k.log.maxBackupIndex}
log4j.appender.rolling.layout=org.apache.log4j.PatternLayout
log4j.appender.rolling.layout.ConversionPattern=%d{ISO8601} %-5p [%t] %c - %m%n

# === Примеры запуска (профили логирования через JVM‑флаги) ======================
# Эти флаги управляют ТОЛЬКО путём/ротацией логов (см. свойства h2k.log.* выше).
# Параметры продьюсера/репликации управляются через hbase-site.xml (H2kConfig),
# либо через add_peer профили (fast/balanced/reliable).
# ----------------------------------------------------------------------------
# Вариант 1: через HBASE_OPTS (в hbase-env.sh или перед запуском сервиса)
#   export HBASE_OPTS="$HBASE_OPTS -Dh2k.log.dir=/var/log/h2k -Dh2k.log.profile=fast -Dh2k.log.maxFileSize=128MB -Dh2k.log.maxBackupIndex=20"
#   bin/hbase regionserver start
#
# Профили (подставьте одно из):
#   -Dh2k.log.profile=default
#   -Dh2k.log.profile=fast
#   -Dh2k.log.profile=reliable
#
# Не забудьте создать каталог логов и права:
#   sudo install -d -o hbase -g hbase -m 0755 /var/log/h2k
# ----------------------------------------------------------------------------
# Вариант 2: systemd override для RegionServer (рекомендуемый способ)
#   sudo mkdir -p /etc/systemd/system/hbase-regionserver.service.d
#   sudo tee /etc/systemd/system/hbase-regionserver.service.d/10-h2k-logs.conf >/dev/null <<'EOF'
#   [Service]
#   Environment="HBASE_OPTS=${HBASE_OPTS} -Dh2k.log.dir=/var/log/h2k -Dh2k.log.profile=reliable -Dh2k.log.maxFileSize=128MB -Dh2k.log.maxBackupIndex=20"
#   EOF
#   sudo systemctl daemon-reload
#   sudo systemctl restart hbase-regionserver
# ----------------------------------------------------------------------------
# Аналогично можно сделать override для Master: hbase-master.service.d/10-h2k-logs.conf
# ============================================================================